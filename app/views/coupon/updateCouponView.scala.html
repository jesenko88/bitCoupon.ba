@(username: String)(coupon: Coupon)(photos : List[Photo])
@import helper._
@main("Coupon Panel") {
<header id="header">
   <!--header-->
   <div class="header-middle">
      <!--header-middle-->
      <div class="container">
         <a href="/"><img src="@routes.Assets.at("images/home/logo.png")" alt="" /></a>
         <div class="logo pull-right">
            <div class="search_box">
               <form action="/search" method="GET">
                  <input id="q" name="q" type="text" placeholder="Search" />
               </form>
            </div>
         </div>
      </div>
      </div>	
   </header>
   <div class="container">
      <div class="features_items">
         <!--features_items-->
         <h2 class="title text-center">Coupon Update</h2>
         <div class="row">
            <div class="col-sm-7">
               <h4> Coupon: "@coupon.name" </h4>
               <div class="signup-form">
                  <!--sign up form-->
                  <form action="@routes.CouponController.updateCoupon(coupon.id)" method ="POST" enctype="multipart/form-data">
                     <label> Title: </label>
                     <input type="text" name="name" id="name" placeholder="Title" minlength="4" maxlength="70" value="@coupon.name" required/>
                     <label> Published by: </label>
                     <input type="text" name="seller" id="seller" placeholder="Company name" minlength="4" maxlength="70" value="@coupon.seller.name" required/>
                     <label> Price: </label>
                     <input type="number" name="price" id="price" min="1" step="any" value="@coupon.getPriceString()" required/>
                     <p> Expiration date: @coupon.dateExpire </p>
                    <input class="form-control datepicker-bit" type="date" id="datepicker" name="dateExpire">
                     <label> Update coupon photo? </label>
                     <input type="file" name="picture" id="picture" placeholder="Choose your photo" />
                     <label> Category </label>
                     <select id="category" name="category" >
                        <option  style="display:none">@coupon.getCategoryName()</option>
                        @for(category <- Category.all()) {
                        <option value="@category.name">@category.name</option>
                        }
                        <option >New Category</option>
                     </select>
                     <input type="text" name="newCategory" style="margin-top:10px; display:none;" id="newCategory" placeholder="New Category ?" />
                     <textarea name="description" id="description" rows="6" style="margin-top:10px" placeholder="Description of Coupon" required> @coupon.description </textarea>
                     <p></p>
                     <textarea name="remark" id="remark" rows="6" placeholder="Remark of Coupon"> "@coupon.remark" </textarea>
                       <p></p>
                     <input type="number" name="minOrder" id="minOrder" min="1" placeholder="Minimal order" value="@coupon.minOrder"required/>
                     <input type="number" name="maxOrder" id="maxOrder" min="1" placeholder="Maximal order" value="@coupon.maxOrder"required/>
                     <span id="error" style="display:none; color:red"> Maximal order can not be smaller than minimal order </span>
                      <p> Usage date: @coupon.usage </p>  
                    <input type="date" id="usage" name="usage"/>
                     <span id="error1" style="display:none; color:red"> Maximal order can not be smaller than minimal order </span>                         
                     <button type="submit" class="btn btn-default">Update Coupon</button>
                     <p></p>
                     <p></p>
                     <p></p>
                     <p></p>
                  </form>
               </div>

            </div>
         </div>
         <div class="col-sm-5">
            <h4>Add photos to coupon gallery </h4>
            <br>
            <div class="signup-form">
               <form action="@routes.CouponController.galleryUpload(coupon.id)" enctype="multipart/form-data" method="post">
                  <input name="photo" type="file" multiple="multiple" max-uploads=3/>
                  <button type="submit" class="btn btn-default">Submit</button>
               </form>
            </div>
         </div>
         <!-- GALERY -->
         <p>If you cannot see images, please refresh page. </p>
         <div class="col-sm-5">
            @if(Photo.photosByCoupon(coupon) != null){
            @for(photo <- photos){
            <form method="POST" action="@routes.CouponController.deletePhoto(photo.id)">
               <div class="uploadPicture">
                  <img alt="140x140" src="@routes.Assets.at(photo.path)" class="img-thumbnail" />
                  <button type="submit"  class="btn btn-danger btn-sm">DELETE</button>
               </div>
            </form>
            }
            }
         </div>
      </div>
   </div>
</div>
}