@(coupon: Coupon)
@import models.comments._
@import java.math.BigInteger; var i=0
@main("Welcome to bitCoupon") {
<header id="header">
   <!--header-->
   <div class="header-middle">
      <!--header-middle-->
      <div class="container">
         <a href="/"><img src="@routes.Assets.at("images/home/logo.png")" alt="" /></a>
         <div class="logo pull-right">
            <div class="search_box">
               <form action="/search" method="GET">
                  <input id="q" name="q" type="text" placeholder="Search" />
               </form>
            </div>
         </div>
      </div>
   </div>
</header>
<div class="container">
   <div class="col-sm-12">
      <div class="col-sm-6">
         <!--  CAROUSEL -->
         <div id="carousel-example-generic" class="carousel slide" data-ride="carousel">
            <!-- Indicators -->
            <ol class="carousel-indicators">
               <li data-target="#carousel-example-generic" data-slide-to="@i" class="active"></li>
               @for(photo <- Photo.photosByCoupon(coupon)){
               @{i=i+1}
               <li data-target="#carousel-example-generic" data-slide-to="@i"></li>
               }
            </ol>
            <!-- Wrapper for slides -->
            <div class="carousel-inner" role="listbox">
               <div class="item active">
                  <img src="@routes.Assets.at(coupon.picture)"></img>
               </div>
               @for(photo <- Photo.photosByCoupon(coupon)){
               <div class="item">
                  <img src="@routes.Assets.at(photo.path)"></img>      
               </div>
               }
               ...
            </div>
            <!-- Controls -->
            <a class="left carousel-control" href="#carousel-example-generic" role="button" data-slide="prev">
            <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
            <span class="sr-only">Previous</span>
            </a>
            <a class="right carousel-control" href="#carousel-example-generic" role="button" data-slide="next">
            <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
            <span class="sr-only">Next</span>
            </a>
         </div>
      </div>
      <!-- END OF SLIDER -->	
      <div class="col-sm-6">
         <div class="product-information">
            <!--/product-information-->
            <div class="col-sm-12">
               <h2> @coupon.name </h2>
               <span>
               <span> @coupon.getPriceString() KM</span>
               @if(Sesija.adminCheck(ctx()) == false && Sesija.companyCheck(ctx()) == false) {
               @if(CouponController.isExpired(coupon.id)==false && coupon.maxOrder > 0) {
               <label>Enter the amount of coupons </label>
               <form action="/couponpurchase" method="POST" data-paypal-button="true">
                  <input type="text" id="coupon_id" name="coupon_id" value="@coupon.id" hidden/>
                  <input type="number" step="1" id="quantity" name="quantity" min="1" max=@coupon.maxOrder placeholder="0" required/>
                  <button type="submit" id="submit-buy" >
                  <img src="//www.paypalobjects.com/en_US/i/btn/btn_xpressCheckout.gif" alt="Check out with PayPal" />
                  </button>
               </form>
               }

                @if(coupon.maxOrder <= 0) {
               <label><h3>Offer succeded </h3></label>
              	 }

               @if(CouponController.isExpired(coupon.id)==true) {
               <label>Coupon has expired </label>
              	 }
               }
               @if(Sesija.adminCheck(ctx()) == true) {
               <a href='@routes.CouponController.editCoupon(coupon.id)' class="btn btn-fefault cart">Update coupon</a>						
               <a href='@routes.CouponController.deleteCoupon(coupon.id)' onclick="return confirm('Are you sure you want to delete this coupon?');"
                  class="btn btn-fefault cart">Delete coupon</a>

                   @if(coupon.buyers.size() > 0) {
                  <a href="/refundCoupon/@coupon.id" class="btn btn-fefault cart" onclick="return confirm('Are you sure you want to refund?);">Refund</a>
             	  }
             	  
               	@if(CouponController.isExpired(coupon.id)==false && coupon.maxOrder > 0) {
	               <form action="/buyForUser" method="GET" >
	               	  <input id="coupon_id" name="coupon_id" type="text" value=@coupon.id hidden />
	               	  <input id="pin" name="pin" type="text" style="width: 150px;" maxlength="6" placeholder="Pin code" required/>
	                  <button type="submit" id="buy-for" class="btn btn-default" >Buy for User</button> 
	               </form>
              	 }
               }
                @if(Sesija.companyCheck(ctx()) == true && Coupon.ownedCoupons(Sesija.getCurrentCompany(ctx()).id).contains(coupon)) {
               <a href='@routes.CouponController.editCoupon(coupon.id)' class="btn btn-fefault cart">Update coupon</a>						
               <a href='@routes.CouponController.deleteCoupon(coupon.id)' onclick="return confirm('Are you sure you want to delete this coupon?');"
                  class="btn btn-fefault cart">Delete coupon</a>
                   @if(coupon.buyers.size() > 0) {
                  <a href="/refundCoupon/@coupon.id" class="btn btn-fefault cart" onclick="return confirm('Are you sure you want to refund?);">Refund</a>
             	  }
         	   }

               <label class="pull-left" >Minimum coupons to be sold:
               <span><textarea disabled rows="1">@coupon.minOrder</textarea></span>
               </label>	
               <div>				
                  <textarea disabled rows="1">@coupon.getExpiration()</textarea>
               </div>
               <br>
               <div>
                  <label class="pull-left" >Description</label>
                  <textarea disabled rows="6" >@coupon.description</textarea>
               </div>
               <br>
               <div>
                  <label class="pull-left" >Remark</label>
                  <textarea disabled rows="4">@coupon.remark</textarea>
                  <label class="pull-left">Published by</label>

                  
               <span><a href="@routes.CompanyController.showCompanyProfile(coupon.seller.id)">@coupon.seller.name</a></span> 
               <label class="pull-left">Number of views @coupon.numOfViews</label>
               

               </div>
            </div>
         </div>
         <!--/product-information-->
      </div>
   </div>
</div>
<!-- COMMENTS AND QUESTIONS -->
<div class="container">
   <div class="tabbable" id="tabs-706598">
      <ul class="nav nav-tabs">
         <li class="active">
            <a href="#panel-935988" data-toggle="tab">Comments</a>
         </li>
         <li>
            <a href="#panel-807788" data-toggle="tab">Questions</a>
         </li>
      </ul>
      <div class="tab-content">
         <div class="tab-pane active" id="panel-935988">
            <!-- comments -->   
            <div class="detailBox">
               <div class="titleBox">
                  <label>Comments</label>
                  <button type="button" class="close" aria-hidden="true">&times;</button>
               </div>
               <div class="actionBox">
                  <ul class="commentList">
                     @for(comment <- Comment.findByCoupon(coupon)){           	
                     <li>
                        <div class="commenterImage">
                           <img src="@routes.Assets.at(comment.user.profilePicture)" />
                        </div>
                        <div class="commentText">
                           <p class="">@comment.comment</p>
                           <span class="date sub-text">Comment by: @comment.user.username on @comment.date</span>					
                           <span style="margin-left:20px" title="Report this comment">
                           <a style="color:red" href="@routes.CommentController.report(comment.id)"><i class="glyphicon glyphicon-ban-circle"></i></a> 
                           </span>
                        </div>
                     </li>
                     }
                  </ul>
                  <br><br><br>
                  @if(Sesija.getCurrent(ctx()) != null){
                  @if(Sesija.getCurrent(ctx()).isUser()){
                  <form class="form-inline" action="@routes.CommentController.comment(coupon.id)" method="POST">
                     <div class="form-group">
                        <input class="form-control" id="comment" name="comment" type="text" placeholder="Your comments" />
                     </div>
                     <div class="form-group">
                        <button type="submit" class="btn btn-default">Comment</button>
                     </div>
                  </form>
                  }
                  }
               </div>
            </div>
         </div>
         <div class="tab-pane" id="panel-807788">
            <p>
               Howdy, I'm in Section 2.
            </p>
         </div>
      </div>
   </div>
</div>
}
